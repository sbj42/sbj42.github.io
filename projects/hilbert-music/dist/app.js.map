{"version":3,"sources":["index.ts","resolution.ts","event.ts","vis1d.ts","hilbert.ts","gradient.ts","vis2d.ts","audio.ts","scale.ts","chords.ts"],"names":[],"mappings":"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","file":"","sourcesContent":["import './resolution';\r\nimport './chords';\r\nimport './vis1d';\r\nimport './vis2d';\r\n\r\nif (!('AudioContext' in window)) {\r\n    document.getElementById('desc').innerHTML += '<br/><br/><b>Your browser doesn\\'t support the Web Audio API.';\r\n}","import {\r\n    onRestart,\r\n} from './event';\r\n\r\nconst resolution = document.getElementById('resolution');\r\nresolution.innerHTML = 'Resolution: ';\r\n\r\nconst input = document.createElement('input');\r\ninput.type = 'range';\r\ninput.min = '2';\r\ninput.max = '7';\r\ninput.value = '5';\r\nresolution.appendChild(input);\r\n\r\ninput.oninput = () => {\r\n    onRestart(+input.value);\r\n};\r\nonRestart(+input.value);","import { highlight as h1d, reset as r1d, restart as r1 } from './vis1d';\r\nimport { highlight as h2d, reset as r2d, restart as r2 } from './vis2d';\r\nimport { start, stop } from './audio';\r\nimport { getHertz } from './scale';\r\nimport { restart as hr, HILBERT1D_LENGTH } from './hilbert';\r\n\r\nlet lastD = null;\r\n\r\nexport function onOut() {\r\n    if (lastD !== null) {\r\n        for (const d of lastD) {\r\n            r1d(d);\r\n            r2d(d);\r\n        }\r\n    }\r\n    stop();\r\n    lastD = null;\r\n}\r\nexport function onHover(d: number) {\r\n    if (lastD !== null) {\r\n        for (const d of lastD) {\r\n            r1d(d);\r\n            r2d(d);\r\n        }\r\n    }\r\n    h1d(d);\r\n    h2d(d);\r\n    start([getHertz(d)]);\r\n    lastD = [d];\r\n}\r\nwindow.fix = (d: number) => {\r\n    h1d(d);\r\n    h2d(d);\r\n    start([getHertz(d)]);\r\n}\r\n// fix(Math.log2(261.626/261.626)*1024); fix(Math.log2(349.228/261.626)*1024); fix(Math.log2(440/261.626)*1024);\r\n// fix(Math.log2(493.88/261.626)*1024); fix(Math.log2(349.228/261.626)*1024); fix(Math.log2(391.995/261.626)*1024);\r\n\r\nexport function onRestart(n) {\r\n    hr(n);\r\n    r1();\r\n    r2();\r\n}\r\nexport function onChord(vs: number[]) {\r\n    let ds = [];\r\n    for (const v of vs) {\r\n        ds.push(Math.floor(v * HILBERT1D_LENGTH()));\r\n    }\r\n    let hz = [];\r\n    for (const d of ds) {\r\n        hz.push(getHertz(d));\r\n        h1d(d);\r\n        h2d(d);\r\n    }\r\n    lastD = ds;\r\n    start(hz);\r\n}","import {\r\n    HILBERT1D_LENGTH,\r\n    HILBERT2D_WIDTH,\r\n    conv1to2,\r\n    conv2to1\r\n} from './hilbert';\r\nimport { getColor } from './gradient';\r\nimport { onHover, onOut } from './event';\r\n\r\nlet VIS1D_ZOOM = 1;\r\nlet VIS1D_HEIGHT = 20;\r\nlet TICK_HEIGHT = 15;\r\nlet VIS1D_WIDTH = HILBERT1D_LENGTH() * VIS1D_ZOOM;\r\nlet context;\r\n\r\nfunction vis1DColor(d: number, c: string) {\r\n    const x = Math.floor(d * VIS1D_ZOOM);\r\n    context.fillStyle = c;\r\n    context.fillRect(x, 0, Math.max(1, VIS1D_ZOOM), VIS1D_HEIGHT);\r\n}\r\n\r\nexport function restart() {\r\n    VIS1D_ZOOM = 512 / HILBERT1D_LENGTH();\r\n    VIS1D_HEIGHT = 20;\r\n    TICK_HEIGHT = 15;\r\n    VIS1D_WIDTH = HILBERT1D_LENGTH() * VIS1D_ZOOM;\r\n\r\n    const vis1d = document.getElementById('vis1d');\r\n    vis1d.innerHTML = '';\r\n\r\n    const canvas = document.createElement('canvas');\r\n    canvas.width = VIS1D_WIDTH + 15;\r\n    canvas.height = VIS1D_HEIGHT + TICK_HEIGHT;\r\n    vis1d.appendChild(canvas);\r\n    context = canvas.getContext('2d');\r\n    context.fillStyle = '#fff';\r\n    context.fillRect(0, 0, canvas.width, canvas.height);\r\n\r\n\r\n    for (let d = 0; d < HILBERT1D_LENGTH(); d ++) {\r\n        vis1DColor(d, getColor(d));\r\n    }\r\n    const NOTE = ['C', 'C#', 'D', 'D#', 'E', 'F', 'F#', 'G', 'G#', 'A', 'A#', 'B', 'C'];\r\n    context.font = '14px sans-serif';\r\n    context.fillStyle = '#000';\r\n    for (let i = 0; i <= 12; i ++) {\r\n        let x = Math.floor(i * VIS1D_ZOOM * HILBERT1D_LENGTH() / 12);\r\n        if (i == 12) {\r\n            x --;\r\n        }\r\n        context.fillRect(x, VIS1D_HEIGHT, 1, TICK_HEIGHT);\r\n        context.fillText(NOTE[i], x + 2, canvas.height - 2);\r\n    }\r\n\r\n    canvas.addEventListener('mousemove', (event) => {\r\n        const d = Math.floor(event.offsetX / VIS1D_ZOOM);\r\n        if (d < HILBERT1D_LENGTH()) {\r\n            onHover(d);\r\n        }\r\n    });\r\n    canvas.addEventListener('mouseout', (event) => {\r\n        onOut();\r\n    });\r\n}\r\n\r\nexport function reset(d: number) {\r\n    vis1DColor(d, getColor(d));\r\n}\r\n\r\nexport function highlight(d: number) {\r\n    vis1DColor(d, 'yellow');\r\n}","let iterations = 5;\r\nlet width2d = Math.pow(2, iterations);\r\nlet length1d = Math.pow(width2d, 2);\r\n\r\nexport function HILBERT_ITERATIONS() {\r\n    return iterations;\r\n}\r\nexport function HILBERT2D_WIDTH() {\r\n    return width2d;\r\n}\r\nexport function HILBERT1D_LENGTH() {\r\n    return length1d;\r\n}\r\n\r\nexport function restart(i: number) {\r\n    iterations = i;\r\n    width2d = Math.pow(2, iterations);\r\n    length1d = Math.pow(width2d, 2);\r\n}\r\n\r\nfunction rot(n: number, x: number, y: number, rx: number, ry: number) {\r\n    if (ry === 0) {\r\n        if (rx === 1) {\r\n            x = n - 1 - x;\r\n            y = n - 1 - y;\r\n        }\r\n        const t = x;\r\n        x = y;\r\n        y = t;\r\n    }\r\n    return [x, y];\r\n}\r\n\r\nfunction xy2d(n: number, x: number, y: number) {\r\n    let d = 0;\r\n    for (let s = Math.floor(n / 2); s > 0; s = Math.floor(s / 2)) {\r\n        const rx = (x & s) > 0 ? 1 : 0;\r\n        const ry = (y & s) > 0 ? 1 : 0;\r\n        d += s * s * ((3 * rx) ^ ry);\r\n        [x, y] = rot(s, x, y, rx, ry);\r\n    }\r\n    return d;\r\n}\r\n\r\nfunction d2xy(n: number, d: number) {\r\n    let t = d;\r\n    let x = 0;\r\n    let y = 0;\r\n    for (let s = 1; s < n; s *= 2) {\r\n        const rx = 1 & Math.floor(t / 2);\r\n        const ry = 1 & (t ^ rx);\r\n        [x, y] = rot(s, x, y, rx, ry);\r\n        x += s * rx;\r\n        y += s * ry;\r\n        t /= 4;\r\n    }\r\n    return [x, y];\r\n}\r\n\r\nexport function conv2to1(x: number, y: number) {\r\n    return xy2d(width2d, x, y);\r\n}\r\n\r\nexport function conv1to2(d: number) {\r\n    return d2xy(width2d, d);\r\n}","import { HILBERT1D_LENGTH } from './hilbert';\r\n\r\nexport function getColor(d: number) {\r\n    const p = d / HILBERT1D_LENGTH();\r\n    const p1 = Math.min(1, Math.max(0, 1 - p * 1.5));\r\n    const p2 = Math.min(1, Math.max(0, 1 - Math.abs(p - 0.5) * 3));\r\n    const p3 = Math.min(1, Math.max(0, 1 - (1 - p) * 1.5));\r\n    const color1 = Math.floor(p1 * 255);\r\n    const color2 = Math.floor(p2 * 255);\r\n    const color3 = Math.floor(p3 * 255);\r\n    return `rgb(${color1}, ${color2}, ${color3})`;\r\n}","import {\r\n    HILBERT1D_LENGTH,\r\n    HILBERT2D_WIDTH,\r\n    HILBERT_ITERATIONS,\r\n    conv1to2,\r\n    conv2to1\r\n} from './hilbert';\r\nimport { getColor } from './gradient';\r\nimport { onHover, onOut } from './event';\r\n\r\nlet VIS2D_ZOOM = 8;\r\nlet VIS2D_WIDTH = HILBERT2D_WIDTH() * VIS2D_ZOOM;\r\nlet context;\r\n\r\nfunction vis2DColor(x: number, y: number, c: string) {\r\n    context.fillStyle = c;\r\n    context.fillRect(x * VIS2D_ZOOM, y * VIS2D_ZOOM, VIS2D_ZOOM, VIS2D_ZOOM);\r\n}\r\nfunction vis2DLine(d: number) {\r\n    context.strokeStyle = '#000';\r\n    context.beginPath();\r\n    if (d > 0) {\r\n        const [x, y] = conv1to2(d - 1);\r\n        context.moveTo(x * VIS2D_ZOOM + VIS2D_ZOOM/2, y * VIS2D_ZOOM + VIS2D_ZOOM/2);\r\n        const [x2, y2] = conv1to2(d);\r\n        context.lineTo(x2 * VIS2D_ZOOM + VIS2D_ZOOM/2, y2 * VIS2D_ZOOM + VIS2D_ZOOM/2);\r\n        if (d < HILBERT1D_LENGTH() - 1) {\r\n            const [x3, y3] = conv1to2(d + 1);\r\n            context.lineTo(x3 * VIS2D_ZOOM + VIS2D_ZOOM/2, y3 * VIS2D_ZOOM + VIS2D_ZOOM/2);\r\n        }\r\n    } else {\r\n        const [x, y] = conv1to2(d);\r\n        context.moveTo(x * VIS2D_ZOOM + VIS2D_ZOOM/2, y * VIS2D_ZOOM + VIS2D_ZOOM/2);\r\n        const [x2, y2] = conv1to2(d + 1);\r\n        context.lineTo(x2 * VIS2D_ZOOM + VIS2D_ZOOM/2, y2 * VIS2D_ZOOM + VIS2D_ZOOM/2);\r\n    }\r\n    context.stroke();\r\n}\r\nfunction vis2DCircle(d: number) {\r\n    context.fillStyle = '#fff';\r\n    const [x, y] = conv1to2(d);\r\n    context.fillRect(x * VIS2D_ZOOM + VIS2D_ZOOM/4, y * VIS2D_ZOOM + VIS2D_ZOOM/4, VIS2D_ZOOM/2, VIS2D_ZOOM/2);\r\n}\r\nfunction recircle() {\r\n    for (let i = 0; i <= 12; i ++) {\r\n        if (i == 12) {\r\n            vis2DCircle(Math.floor(i * HILBERT1D_LENGTH() / 12) - 1);\r\n        } else {\r\n            vis2DCircle(Math.floor(i * HILBERT1D_LENGTH() / 12));\r\n        }\r\n    }\r\n}\r\n\r\nexport function restart() {\r\n    VIS2D_ZOOM = Math.floor(16 / Math.pow(2, HILBERT_ITERATIONS() - 5));\r\n    VIS2D_WIDTH = HILBERT2D_WIDTH() * VIS2D_ZOOM;\r\n\r\n    const vis2d = document.getElementById('vis2d');\r\n    vis2d.innerHTML = '';\r\n\r\n    const canvas = document.createElement('canvas');\r\n    canvas.width = VIS2D_WIDTH;\r\n    canvas.height = VIS2D_WIDTH;\r\n    vis2d.appendChild(canvas);\r\n    context = canvas.getContext('2d');\r\n\r\n    for (let d = 0; d < HILBERT1D_LENGTH(); d ++) {\r\n        const [x, y] = conv1to2(d);\r\n        vis2DColor(x, y, getColor(d));\r\n    }\r\n    for (let d = 0; d < HILBERT1D_LENGTH(); d ++) {\r\n        vis2DLine(d);\r\n    }\r\n    recircle();\r\n\r\n    canvas.addEventListener('mousemove', (event) => {\r\n        const x = Math.floor(event.offsetX / VIS2D_ZOOM);\r\n        const y = Math.floor(event.offsetY / VIS2D_ZOOM);\r\n        onHover(conv2to1(x, y));\r\n    });\r\n    canvas.addEventListener('mouseout', (event) => {\r\n        onOut();\r\n    });\r\n}\r\n\r\nexport function reset(d: number) {\r\n    const [x, y] = conv1to2(d);\r\n    vis2DColor(x, y, getColor(d));\r\n    vis2DLine(d);\r\n    recircle();\r\n}\r\n\r\nexport function highlight(d: number) {\r\n    const [x, y] = conv1to2(d);\r\n    vis2DColor(x, y, 'yellow');\r\n}","let context: AudioContext;\r\n\r\nconst GAIN = 0.4;\r\n\r\nconst HARMONICS = [\r\n    [1, 1],\r\n    [2, 0.399],\r\n    [3, 0.299],\r\n    [4, 0.152],\r\n    [5, 0.197],\r\n    [6, 0.094],\r\n    [7, 0.061],\r\n    [8, 0.139],\r\n    // [10, 0.071]\r\n];\r\n\r\nconst oscillators: OscillatorNode[] = [];\r\n\r\nexport function start(hertz: number[]) {\r\n    function setOscillator(index, freq, relAmp) {\r\n        let oscillator;\r\n        const newOsc = oscillators.length <= index;\r\n        if (newOsc) {\r\n            oscillator = context.createOscillator();\r\n        } else {\r\n            oscillator = oscillators[index];\r\n        }\r\n        oscillator.frequency.value = freq;\r\n        if (newOsc) {\r\n            var gain = context.createGain();\r\n            gain.gain.value = 0.125 * GAIN * relAmp;\r\n            oscillator.connect(gain);\r\n            gain.connect(context.destination);\r\n            oscillators.push(oscillator);\r\n            oscillator.start();\r\n        }\r\n    }\r\n    if (!context) {\r\n        if (!('AudioContext' in window))\r\n            return;\r\n        context = new AudioContext();\r\n    }\r\n    let i = 0;\r\n    for (const hz of hertz) {\r\n        for (const h of HARMONICS) {\r\n            setOscillator(i, hz * h[0], h[1]);\r\n            i ++;\r\n        }\r\n    }\r\n    while (i < oscillators.length) {\r\n        oscillators.pop().stop();\r\n    }\r\n}\r\n\r\nexport function stop() {\r\n    for (const n of oscillators) {\r\n        n.stop();\r\n    }\r\n    oscillators.length = 0;\r\n    if (context) {\r\n        context.close();\r\n        context = null;\r\n    }\r\n}","import { HILBERT1D_LENGTH } from './hilbert';\r\n\r\nexport function getHertz(d: number) {\r\n    const p = d / HILBERT1D_LENGTH();\r\n    return 261.626 * Math.pow(2, p);\r\n}","import {\r\n    onChord,\r\n    onOut,\r\n} from './event';\r\n\r\nconst chords = document.getElementById('chords');\r\nchords.innerHTML = 'Chords (hold down):<br/>';\r\n\r\nfunction addButton(name: string, v: number[]) {\r\n    const button = document.createElement('div');\r\n    button.style.padding = '3px';\r\n    button.style.border = '1px solid black';\r\n    button.style.margin = '3px';\r\n    button.style.background = '#aaf';\r\n    button.style.width = '100px';\r\n    button.style.display = 'inline-block';\r\n    button.style.cursor = 'pointer';\r\n    button.innerHTML = name;\r\n    chords.appendChild(button);\r\n\r\n    button.onmousedown = () => {\r\n        onChord(v.map((v) => v / 12));\r\n        return false;\r\n    };\r\n    button.onmouseup = () => {\r\n        onOut();\r\n    };\r\n}\r\n\r\naddButton('Cmaj', [0, 4, 7]);\r\naddButton('Cmin', [0, 3, 7]);\r\naddButton('Dmin', [2, 5, 9]);\r\naddButton('Ddim', [2, 5, 8]);\r\naddButton('Fmaj', [0, 5, 9]);\r\naddButton('Gmaj', [2, 7, 11]);\r\naddButton('Gmin', [2, 7, 10]);\r\naddButton('Daug', [2, 6, 10]);"]}